/**************************************************************************************************
  Filename:       timer.c
  Revised:        $Date: 2013-4-12 21:33$
  Revision:       $Revision: 00001 $

  Description:    

**************************************************************************************************/

/*********************************************************************
 * INCLUDES
 */
#include "hal_types.h"
#include "timer.h"
#include "SampleApp.h"

/*********************************************************************
 * MACROS
 */

/*********************************************************************
 * CONSTANTS
 */

/*********************************************************************
 * TYPEDEFS
 */

/*********************************************************************
 * GLOBAL VARIABLES
 */

/*********************************************************************
 * LOCAL VARIABLES
 */

/*********************************************************************
 * LOCAL FUNCTIONS
 */

/*********************************************************************
 * PUBLIC FUNCTIONS
 */
void timer_init();
void timer_delayUm( uint16 _um );

/*********************************************************************
 * @fn      Module_PublicFunc
 *
 * @brief   
 *
 * @param   none
 * @return  none
 */
void timer_init( void ){
  
  
  T3CTL = 0x68;
  //8分频（默认16MHz/8=2MHz），停止计数，开溢出中断，计数值清零，自动重装模式
  
  
  
}
/*********************************************************************
 * @fn      Module_PublicFunc
 *
 * @brief   
 *
 * @param   none
 * @return  none
 */
void timer_delayUm( uint16 _um ){
  
  T3CTL &=~ 0x07;//清计数值，两模式位清零
  T3CTL |= 0x03;//循环增减计数模式
  T3CC0 = _um;//最多延时256微秒
  T3CTL |= 0x10;//开启计数
  while(T3OVFIF != 1);//等待计时时间到
  T3CTL &=~ 0x10;//停止计数
  T3OVFIF = 0;
}
/*********************************************************************
 * @fn      Module_PublicFunc
 *
 * @brief   
 *
 * @param   none
 * @return  none
 */
/*********************************************************************
*********************************************************************/
